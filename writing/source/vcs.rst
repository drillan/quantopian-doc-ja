.. _vcs:

構成管理利用指針
==============

.. _vcs-policy:

方針
----
- ブランチ数を最小にする
- 作業単位で情報が分散しないようにする（凝集度を高める）
- 作業況をわかりやすくする

.. _vcs-branch:

ブランチ一覧
----------
master
  少なくとも、査読、日本語警察実施済みの成果物を配置する

[翻訳範囲を示すブランチ]
  該当範囲の翻訳、査読、日本語警察作業を行うため、masterから作成されるブランチ

  - ブランチ名は、[a-zA-Z_0-9]からなる文字列で命名する
  - Tutorialの場合 ： tutorial[番号]_[タイトル]_[lesson][最初の番号]_[最後の番号]
  - Lectureの場合 : lecture[番号]_[タイトル]

user_[ユーザレビュー範囲を示すブランチ]
  ユーザレビューで変更が必要な場合、masterから作成されるブランチ

  - [ユーザレビュー範囲を示すブランチ]は、[翻訳範囲を示すブランチ]に準拠する

.. _vcs-workflow:

作業の流れ
--------
1. 翻訳（詳細はGitHub Wiki [#translation]_ を参照）

   - 翻訳範囲を示すブランチを作成する
   - （空）コミットを行う
   - masterブランチに対し、Draft PR(Pull Request)を発行する

     - チェックボックスにて、作業進捗が分かるようにする

   - 作成したブランチに翻訳コミットを追加していき翻訳を終わらせる
   - 翻訳作業が終わったら、Draft PRをPRに変更し、PR上で査読メンバーに@mentionで通知する

2. 査読

   - PRに対して、コメントを記載していき査読を終わらせる

     - PRのFiles changedタブで差分を開き+アイコンをクリックしてコメントを追記

   - 必要に応じて、翻訳者と連絡を取り合い査読を終わらせる
   - 査読が完了したら、PR上で日本語警察メンバーに@mentionで通知する

3. 日本語警察

   - PRに対して、コメントを記載していき日本語警察を終わらせる

     - PRのFiles changedタブで差分を開き+アイコンをクリックしてコメントを追記

   - 必要に応じて、翻訳者と連絡を取り合い日本語警察を終わらせる 
   - 日本語警察が完了したら、PRをマージする

4. ユーザレビュー

   - 翻訳者の依頼を受け、指定された翻訳範囲のユーザレビューを行う
   - 必要に応じて、翻訳者と連絡を取り合いユーザレビューを終わらせる 
   - 変更が必要な場合に限り以下を行う
   
     - 翻訳者がブランチを作成して修正を行いPRを発行する
     - ユーザレビュー担当者が確認を行い、問題なければマージする

.. rubric:: 脚注

.. [#translation] https://github.com/tokyoquantopian/quantopian-doc-ja/wiki/%E7%BF%BB%E8%A8%B3%E8%80%85%E4%BD%9C%E6%A5%AD%E3%83%A1%E3%83%A2


